
let page_produk = [
    {
      "harga" : "Rp. 18.000,00 per Kg",
      "nama" : "Padi",
      "gambar" : "./img/hasilpanen/padi.jpg",
      "rating" : "4.8",
      "deskripsi" : "Padi adalah salah satu jenis tanaman pangan yang paling penting di Indonesia. Padi ini memiliki kualitas yang sangat baik dan cocok untuk diolah menjadi berbagai macam makanan.",
      "stok" : "20kg",
      "type" : "hasil-panen"
    },
    {
        "harga" : "Rp. 5.000,00",
        "nama" : "Bibit Tomat",
        "gambar" : "./img/bibit/tomat2.jpg",
        "rating" : "4.5",
        "deskripsi" : "Bibit tomat yang sehat dan berkualitas tinggi, cocok untuk ditanam di berbagai jenis tanah.",
        "stok" : "1000",
        "type" : "bibit"
      },
      {
        "harga" : "Rp. 3.000,00",
        "nama" : "Bibit Cabai",
        "gambar" : "./img/bibit/cabai2.jpg",
        "rating" : "4.2",
        "deskripsi" : "Bibit cabai yang pedas dan berkualitas tinggi, cocok untuk ditanam di berbagai jenis tanah.",
        "stok" : "800",
        "type" : "bibit"
      },
      {
        "harga" : "Rp. 10.000,00",
        "nama" : "Pupuk Organik Kompos",
        "gambar" : "./img/pupuk/kompos2.jpg",
        "rating" : "4.8",
        "deskripsi" : "Pupuk organik kompos yang terbuat dari bahan alami, cocok untuk meningkatkan kesuburan tanah dan pertumbuhan tanaman.",
        "stok" : "500",
        "type" : "pupuk"
      },
]

let page_bacaan = [
  {
    "judul": "Tips Membuat Tanah Subur untuk Pertanian",
    "content": "Tanah yang subur adalah kunci utama untuk pertanian yang sukses. Berikut adalah beberapa tips untuk membuat tanah subur: menambahkan kompos, menggunakan pupuk alami, dan menghindari penggunaan pestisida kimia.",
    "gambar": "./img/baca/tips_tanah_subur.jpg",
    "tanggal_upload": "2022-01-01",
    "love" : 24
  },
  {
    "judul": "Cara Menanam Sayuran yang Benar",
    "content": "Menanam sayuran memerlukan teknik yang tepat untuk mendapatkan hasil yang maksimal. Berikut adalah beberapa tips untuk menanam sayuran yang benar: memilih benih yang sehat, menyiapkan tanah yang subur, dan melakukan perawatan yang rutin.",
    "gambar": "./img/baca/cara_tanam_sayur.jpg",
    "tanggal_upload": "2022-01-05",
    "love" : 36
  },
  {
    "judul": "Tips Mengatasi Hama dan Penyakit Tanaman",
    "content": "Hama dan penyakit tanaman dapat menjadi ancaman besar bagi pertanian. Berikut adalah beberapa tips untuk mengatasi hama dan penyakit tanaman: menggunakan pestisida alami, melakukan perawatan yang rutin, dan memantau kondisi tanaman secara teratur.",
    "gambar": "./img/baca/tips_mengatasi_hama_tanaman.jpg",
    "tanggal_upload": "2022-01-10",
    "love" : 67
  },
  {
    "judul": "Cara Membuat Pupuk Kompos yang Baik",
    "content": "Pupuk kompos adalah salah satu cara terbaik untuk meningkatkan kesuburan tanah. Berikut adalah beberapa tips untuk membuat pupuk kompos yang baik: memilih bahan yang tepat, melakukan proses pengomposan yang benar, dan memantau kondisi kompos secara teratur.",
    "gambar": "./img/baca/cara_membuat_pupuk_kompos.jpg",
    "tanggal_upload": "2022-01-15",
    "love" : 28
  },
  {
    "judul": "Tips Menghemat Air dalam Pertanian",
    "content": "Menghemat air adalah salah satu cara terbaik untuk meningkatkan efisiensi pertanian. Berikut adalah beberapa tips untuk menghemat air dalam pertanian: menggunakan sistem irigasi yang efisien, melakukan perawatan yang rutin, dan memantau kondisi tanaman secara teratur.",
    "gambar": "./img/baca/menghemat_air.jpg",
    "tanggal_upload": "2022-01-20",
    "love" : 90
  },
  {
    "judul": "Cara Menanam Buah yang Benar",
    "content": "Menanam buah memerlukan teknik yang tepat untuk mendapatkan hasil yang maksimal. Berikut adalah beberapa tips untuk menanam buah yang benar: memilih benih yang sehat, menyiapkan tanah yang subur, dan melakukan perawatan yang rutin.",
    "gambar": "./img/baca/cara_tanam_buah.jpg",
    "tanggal_upload": "2022-01-25",
    "love" : 78
  },
  {
    "judul": "Tips Mengatasi Kekeringan dalam Pertanian",
    "content": "Kekeringan dapat menjadi ancaman besar bagi pertanian. Berikut adalah beberapa tips untuk mengatasi kekeringan dalam pertanian: menggunakan sistem irigasi yang efisien, melakukan perawatan yang rutin, dan memantau kondisi tanaman secara teratur.",
    "gambar": "./img/baca/menghemat_air.jpg",
    "tanggal_upload": "2022-01-30",
    "love" : 45
  },
  {
    "judul": "Cara Membuat Tanaman Hias yang Indah",
    "content": "Tanaman hias dapat menjadi dekorasi yang indah untuk rumah atau taman. Berikut adalah beberapa tips untuk membuat tanaman hias yang indah: memilih tanaman yang tepat, menyiapkan tanah yang subur, dan melakukan perawatan yang rutin.",
    "gambar": "./img/baca/cara_tanam_sayur.jpg",
    "tanggal_upload": "2022-02-01",
    "love" : 17
  },
  {
      "judul": "Tips Menggunakan Teknologi dalam Pertanian",
      "content": "Teknologi dapat menjadi alat yang sangat berguna dalam pertanian. Berikut adalah beberapa tips untuk menggunakan teknologi dalam pertanian: menggunakan aplikasi pertanian, memantau kondisi tanaman secara teratur, dan melakukan analisis data untuk meningkatkan efisiensi.",
      "gambar": "./img/baca/cara_tanam_buah.jpg",
      "tanggal_upload": "2022-02-05",
      "love" : 42
  },
  {
      "judul": "Cara Membuat Sistem Irigasi yang Efisien",
      "content": "Sistem irigasi yang efisien dapat membantu menghemat air dan meningkatkan efisiensi pertanian. Berikut adalah beberapa tips untuk membuat sistem irigasi yang efisien: menggunakan pipa yang tepat, memantau kondisi tanaman secara teratur, dan melakukan perawatan yang rutin.",
      "gambar": "./img/baca/menghemat_air.jpg",
      "tanggal_upload": "2022-02-10",
      "love" : 67
  }
]

const productUnggulan = document.getElementById("product_container")
const bacaanWrapper = document.getElementById("bacaan-wrapper")
const rightSideNav = document.getElementById("right-side-nav")






let cards = ``;
let bacaan = ``;



for (let i = 0; i < 4; i++)
{
    cards += `<div class="card">
                <img class="gambar-icon" src="${page_produk[i]["gambar"]}" alt="GAMBAR">
                <div class="icon">
                    <div class="love" onclick="love(this)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-heart"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></div>
                    <div onclick="love(this)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-bag"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg></div>
                </div>
                <h3>${page_produk[i].nama}</h3>
                <p>${ page_produk[i].harga }</p>
                <input type="text" value=${i} hidden/>
                <button class="tombol-lihat" onclick="lihat(this)">
                    LIHAT
                </button>
            </div>`
}

for (let i = 0; i < 10; i++)
{
    bacaan += `<div class="bacaan swiper-slide">
                    <img src="${page_bacaan[i]["gambar"]}" alt="">
                    <p class="tanggal-bacaan">Diupload: ${page_bacaan[i]["tanggal_upload"]}</p>
                    <p class="title-bacaan">${page_bacaan[i]["judul"]}</p>
                    <input type="text" value="${i}" hidden/>
                    <button style="border: none; margin-left: 10px;" onclick="baca(this)" class="blue-btn">Baca</button>
                </div>`
}

function cari(element) 
{
    let cariS = element.parentElement.children[1].value
    window.location.href = "produk.html?cari=" + cariS;
}

productUnggulan.innerHTML = cards;
bacaanWrapper.innerHTML = bacaan;

function lihat(element)
{
  let indeks_produk = parseInt(element.parentElement.children[4].value)
  let overrider = `
  <div class="detail-container">
      <nav class="navigation-bar">
          <div class="left-side-nav">
              <img src="img/logo.jpg" alt="LOGO" style="height: 80%;">
              <h1>AGROPEDIA</h1>
          </div>
          <div class="right-side-nav" id="right-side-nav">
              <button class='h-b' id='h-b'><div></div><div></div><div></div></button>
              <img src="img/wave.svg" alt="wave" class="wave-nav">
              <img src="img/wave-1.svg" alt="wave" class="wave-nav-2">
              <div class="menu" id="menu">
                  <a href="index.html">
                      Beranda
                  </a>
                  <a href="produk.html">
                      Produk
                  </a>
                  <a href="baca.html">
                      Baca
                  </a>
                  <button id="tombol-masuk" href="">
                      Masuk
                  </button>
                  <button id="tombol-daftar" href="">
                      Daftar
                  </button>
                  <button type="button" id="back" class="back">
                      Kembali
                  </button>
              </div>
          </div>
      </nav>
      <section class="section-produk">
          <a href="produk.html" class="blue-btn">Kembali</a>
          <div class="container-1">
              <img class="gambar-produk" src="${page_produk[indeks_produk]["gambar"]}"  />
              <div class="info">
                  <h1>${page_produk[indeks_produk]["nama"]}</h1>
                  <p style="font-family: inter-medium;">Rating: ${page_produk[indeks_produk]["rating"]}/5.0 <span style="margin-left: 10px; margin-right: 10px; font-family: inter-medium;"> | </span></p>
                  <p class="harga" style="margin-bottom: 5px;">${page_produk[indeks_produk]["harga"]}</p>
                  <p style="color: #333333; font-family: inter-medium;">${page_produk[indeks_produk]["deskripsi"]}</p>
                  <div>
                      <div class="kuan">
                          <div>Stok: ${page_produk[indeks_produk]["stok"]}</div>
                          <span style="font-family: inter-medium;">Kuantitas: </span>
                          <button onclick="kurang()" type="button" id="button-min" style="margin: 0px;">-</button>
                          <input id="kuantitas-input" type="text" style="text-align: center; width: 40px; margin: 0px;" value=1 disabled>
                          <button id="button-add" onclick="tambah()" type="button">+</button>
                      </div>
                      <div class="tombol-submit">
                          <button onclick="love()" class="masukan-keranjang">Masukan Keranjang</button>
                          <button onclick="love()" class="beli-sekarang">Beli Sekarang</button>
                      </div>
                  </div>
              </div>
          </div>
      </section>
      <div class="container">
      <h1>#Ulasan</h1>
      <div class="reviews">
          <div class="review">
              <h2>5/5</h2>
              <p>"Saya sangat puas dengan hasil panen saya setelah menggunakan pupuk organik. Tanaman saya menjadi lebih sehat dan subur!"</p>
              <p>- John Doe</p>
          </div>
          <div class="review">
              <h2>4/5</h2>
              <p>"Saya baru saja memulai pertanian dan saya sangat senang dengan hasilnya. Saya akan terus menggunakan metode ini!"</p>
              <p>- Jane Doe</p>
          </div>
          <div class="review">
              <h2>5/5</h2>
              <p>"Saya sangat puas dengan kualitas pupuk organik yang saya gunakan. Tanaman saya menjadi lebih kuat dan sehat!"</p>
              <p>- Bob Smith</p>
          </div>
          <div class="review">
              <h2>4/5</h2>
              <p>"Saya baru saja mencoba metode pertanian ini dan saya sangat senang dengan hasilnya. Saya akan terus menggunakan metode ini!"</p>
              <p>- Alice Johnson</p>
          </div>
          <div class="review">
              <h2>5/5</h2>
              <p>"Saya sangat puas dengan hasil panen saya setelah menggunakan metode pertanian ini. Tanaman saya menjadi lebih sehat dan subur!"</p>
              <p>- Mike Brown</p>
          </div>
          <div class="review">
              <h2>4/5</h2>
              <p>"Saya baru saja memulai pertanian dan saya sangat senang dengan hasilnya. Saya akan terus menggunakan metode ini!"</p>
              <p>- Emily Davis</p>
          </div>
          <div class="review">
              <h2>5/5</h2>
              <p>"Saya sangat puas dengan kualitas pupuk organik yang saya gunakan. Tanaman saya menjadi lebih kuat dan sehat!"</p>
              <p>- Sarah Taylor</p>
          </div>
          <div class="review">
              <h2>4/5</h2>
              <p>"Saya baru saja mencoba metode pertanian ini dan saya sangat senang dengan hasilnya. Saya akan terus menggunakan metode ini!"</p>
              <p>- David Lee</p>
          </div>
          <div class="review">
              <h2>5/5</h2>
              <p>"Saya sangat puas dengan hasil panen saya setelah menggunakan metode pertanian ini. Tanaman saya menjadi lebih sehat dan subur!"</p>
              <p>- Olivia Martin</p>
          </div>
          <div class="review">
              <h2>4/5</h2>
              <p>"Saya baru saja memulai pertanian dan saya sangat senang dengan hasilnya. Saya akan terus menggunakan metode ini!"</p>
              <p>- Ava Garcia</p>
          </div>
      </div>
      </div>
      <div class="footer">
        <div class="footer-column">
            <h3>Agropedia</h3>
            <p>Telang Nisa Blok A no 1, Kamal Bangkalan</p>
        </div>
        <div class="footer-column">
            <h3>Links</h3>
            <ul>
                <li><a href="index.html">Beranda</a></li>
                <li><a href="produk.html">Produk</a></li>
                <li><a href="baca.html">Baca</a></li>
                <li><a href="https://www.freepik.com/">freepik</a></li>
                                <li><a href="https://id.pinterest.com/99designs/">99designs</a></li>
            </ul>
        </div>
        <div class="footer-column">
            <h3>Hubungi kami</h3>
            <div class="message-area">
                <p>081928381398</p>
                <a href="#">email@email.com</a>
            </div>
    </div>
  <div class="modal login-modal" id="login-modal" style="scale: 0;">
      <form action="/user/login" method="post">
          <h2>MASUK</h2>
          <div class="input-field">
              <p>Email / nomer handphone</p>
              <input type="text" placeholder="Masukan email / nomer-handphone" name="email">
          </div>
          <div class="input-field">
              <p>Password</p>
              <input type="password" placeholder="Masukan password" name="password">
          </div>
          <input type="hidden" name="_token"/>
          <button type="submit"> Masuk </button>
      </form>
  </div>

  <div class="modal daftar-modal" id="daftar-modal" style="scale: 0;">
      <form action="/user/buat-akun" method="post">
          <h2>DAFTAR</h2>
          <div class="input-field" ">
              <p>Email / nomer handphone</p>
              <input type="text" name="email" placeholder="Masukan email / nomer-handphone">
          </div>
          <div class="input-field">
              <p>Password</p>
              <input type="password" name="password" placeholder="Masukan password">
          </div>
          <div class="input-field">
              <p>Konfirmasi password</p>
              <input type="password" name="confirm_pass" placeholder="Konfirmasi password">
          </div>
          <input type="hidden" name="_token"/>
          <button type="submit"> Daftar </button>
      </form>
  </div>
      </div>`
      
      document.getElementsByTagName("body")[0].innerHTML = overrider
      document.documentElement.scrollTop = 0; 
      const menu = document.getElementById("menu")
      const back = document.getElementById("back")
      const hB = document.getElementById("h-b")
      const login_modal = document.getElementById("login-modal");
      const daftar_modal = document.getElementById("daftar-modal");
      const tombol_masuk = document.getElementById("tombol-masuk");
      const tombol_daftar = document.getElementById("tombol-daftar");

      hB.addEventListener("click", () => {
          menu.style.transform = "translateY(0%)";
      })

      back.addEventListener('click', function ()  {
          menu.style.transform = "translateY(-200%)";
      })

      function checkOutsideClick(element, callback) {
          document.addEventListener('mousedown', function(event) {
              if (!element.contains(event.target)) {
                  callback();
              }
          });
      }

      checkOutsideClick(login_modal, function() {
          if (login_modal.style.scale != 0){
              login_modal.style.scale = 0;
          } 
      });

      checkOutsideClick(daftar_modal, function() {
          if (daftar_modal.style.scale != 0){
              daftar_modal.style.scale = 0;
          } 
      });


      tombol_masuk.addEventListener("click", () => {
          if (login_modal.style.scale != 1) {
              login_modal.style.scale = 1;
              daftar_modal.style.scale = 0;
          }
          else {
              login_modal.style.scale = 0;
          }
      })

      tombol_daftar.addEventListener("click", () => {
          if (daftar_modal.style.scale != 1) {
              daftar_modal.style.scale = 1;
              login_modal.style.scale = 0;
          }
          else {
              daftar_modal.style.scale = 0
          }
      })

      function love(){
          console.log(0)
          login_modal.style.scale = 1;
      }
  }


  function tambah() {
      document.getElementById("kuantitas-input").value = parseInt(document.getElementById("kuantitas-input").value) + 1;
  }

  function kurang() {
      if (document.getElementById("kuantitas-input").value == "1") 
      {
          return
      }
      document.getElementById("kuantitas-input").value = parseInt(document.getElementById("kuantitas-input").value) - 1;

  }

function baca(element) 
{
    let indeks = parseInt(element.parentElement.children[3].value)
    love_now = parseInt(page_bacaan[indeks]["love"]);
    document.getElementsByTagName("body")[0].innerHTML = `
    <nav class="navigation-bar">
        <div class="left-side-nav">
            <img src="img/logo.jpg" alt="LOGO" style="height: 80%;">
            <h1>AGROPEDIA</h1>
        </div>
        <div class="right-side-nav" id="right-side-nav">
            <button class='h-b' id='h-b'><div></div><div></div><div></div></button>
            <img src="img/wave.svg" alt="wave" class="wave-nav">
            <img src="img/wave-1.svg" alt="wave" class="wave-nav-2">
            <div class="menu" id="menu">
                <a href="index.html">
                    Beranda
                </a>
                <a href="produk.html">
                    Produk
                </a>
                <a href="baca.html">
                    Baca
                </a>
                <button  id="tombol-masuk" href="">
                    Masuk
                </button>
                <button  id="tombol-daftar" href="">
                    Daftar
                </button>
                <button  type="button" id="back" class="back">
                    Kembali
                </button>
            </div>
        </div>
    </nav>
    <div class="body-bacaan">
        <section class="section-i-baca">
            <h1>#${page_bacaan[indeks]["judul"]}</h1>
            <img src="${page_bacaan[indeks]["gambar"]}" alt="">
        </section>
        <section class="section-bacaan">
            <p>
                Dipublikasikan pada tanggal ${page_bacaan[indeks]["tanggal_upload"]}
            </p>
            <div class="love-container">
                <div onclick="lovePlus(this)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-heart"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></div>
                <span>${page_bacaan[indeks]["love"]}</span>
            </div>
            <div class="content">
                <p>
                    ${page_bacaan[indeks]["content"]}
                </p>
            </div>
        </section>
        <div class="footer">
        <div class="footer-column">
            <h3>Agropedia</h3>
            <p>Telang Nisa Blok A no 1, Kamal Bangkalan</p>
        </div>
        <div class="footer-column">
            <h3>Links</h3>
            <ul>
                <li><a href="index.html">Beranda</a></li>
                <li><a href="produk.html">Produk</a></li>
                <li><a href="baca.html">Baca</a></li>
                <li><a href="https://www.freepik.com/">freepik</a></li>
                                <li><a href="https://id.pinterest.com/99designs/">99designs</a></li>

            </ul>
        </div>
        <div class="footer-column">
            <h3>Hubungi kami</h3>
            <div class="message-area">
                <p>081928381398</p>
                <a href="#">email@email.com</a>
            </div>
    </div>
    </div>
    <div class="modal login-modal" id="login-modal" style="scale: 0;">
        <form action="/user/login" method="post">
            <h2>MASUK</h2>
            <div class="input-field">
                <p>Email / nomer handphone</p>
                <input type="text" placeholder="Masukan email / nomer-handphone" name="email">
            </div>
            <div class="input-field">
                <p>Password</p>
                <input type="password" placeholder="Masukan password" name="password">
            </div>
            <input type="hidden" name="_token"/>
            <button type="submit"> Masuk </button>
        </form>
    </div>

    <div class="modal daftar-modal" id="daftar-modal" style="scale: 0;">
        <form action="/user/buat-akun" method="post">
            <h2>DAFTAR</h2>
            <div class="input-field" ">
                <p>Email / nomer handphone</p>
                <input type="text" name="email" placeholder="Masukan email / nomer-handphone">
            </div>
            <div class="input-field">
                <p>Password</p>
                <input type="password" name="password" placeholder="Masukan password">
            </div>
            <div class="input-field">
                <p>Konfirmasi password</p>
                <input type="password" name="confirm_pass" placeholder="Konfirmasi password">
            </div>
            <input type="hidden" name="_token"/>
            <button type="submit"> Daftar </button>
        </form>
    </div>
    <script src="js/navbar.js"></script>
    `
    
    window.screenTop = 0;
    const menu = document.getElementById("menu")
    const back = document.getElementById("back")
    const hB = document.getElementById("h-b")
    const login_modal = document.getElementById("login-modal");
    const daftar_modal = document.getElementById("daftar-modal");
    const tombol_masuk = document.getElementById("tombol-masuk");
    const tombol_daftar = document.getElementById("tombol-daftar");

    hB.addEventListener("click", () => {
        menu.style.transform = "translateY(0%)";
    })

    back.addEventListener('click', function ()  {
        menu.style.transform = "translateY(-200%)";
    })

    function checkOutsideClick(element, callback) {
        document.addEventListener('mousedown', function(event) {
            if (!element.contains(event.target)) {
                callback();
            }
        });
    }

    checkOutsideClick(login_modal, function() {
        if (login_modal.style.scale != 0){
            login_modal.style.scale = 0;
        } 
    });

    checkOutsideClick(daftar_modal, function() {
        if (daftar_modal.style.scale != 0){
            daftar_modal.style.scale = 0;
        } 
    });


    tombol_masuk.addEventListener("click", () => {
        if (login_modal.style.scale != 1) {
            login_modal.style.scale = 1;
            daftar_modal.style.scale = 0;
        }
        else {
            login_modal.style.scale = 0;
        }
    })

    tombol_daftar.addEventListener("click", () => {
        if (daftar_modal.style.scale != 1) {
            daftar_modal.style.scale = 1;
            login_modal.style.scale = 0;
        }
        else {
            daftar_modal.style.scale = 0
        }
    })
}

function lovePlus(element) {
  if (love_now == parseInt(element.parentElement.children[1].innerHTML)) {
      element.parentElement.children[1].innerHTML = parseInt(element.parentElement.children[1].innerHTML) + 1
      element.style.color = "#6FAC2D";
  }
}